# 使用指南

## 快速开始

### 1. 安装依赖

```bash
cd "E:\Learning\Python Projext\Project"
pip install -r requirements.txt
```

### 2. 配置 API 密钥

#### 获取百度翻译 API

1. 访问 https://fanyi-api.baidu.com/
2. 注册并登录
3. 进入"管理控制台"
4. 创建应用，获取 **APP ID** 和**密钥**

#### 获取有道翻译 API

1. 访问 https://ai.youdao.com/
2. 注册并登录
3. 创建应用，获取 **APP Key** 和 **APP Secret**

### 3. 启动应用

```bash
python main.py
```

### 4. 填写 API 密钥

首次启动后：

1. 点击菜单栏 **设置 → 偏好设置**
2. 填入百度和有道的 API 密钥
3. 选择默认翻译引擎（推荐：百度）
4. 点击"确定"保存

## 功能使用

### 文本翻译

1. 在主窗口的"文本翻译"标签页
2. 选择源语言（默认"自动检测"）和目标语言（默认"中文"）
3. 在上方文本框输入要翻译的内容
4. 点击"翻译"按钮
5. 下方显示翻译结果

**技巧**：
- 单个英文单词会自动识别为"单词查询"，返回更详细的释义
- 支持多行文本翻译

### 文件翻译

1. 切换到"文件翻译"标签页
2. 点击"选择文件"，支持格式：
   - `.txt` - 自动检测编码（UTF-8、GBK 等）
   - `.docx` - Word 文档
   - `.pdf` - PDF 文档（纯文本）
3. 选择源语言和目标语言
4. 点击"翻译文件"
5. 进度条显示翻译进度
6. 完成后，点击"保存翻译结果"导出

**注意**：
- 大文件会自动分块翻译
- PDF 仅支持纯文本提取，扫描版 PDF 无法识别

### 框选翻译（全局快捷键）

1. 确保应用在运行（可最小化到托盘）
2. 在**任意应用**（浏览器、Word、记事本等）中选中文本
3. 按下快捷键 **Ctrl+Alt+T**
4. 悬浮窗自动显示翻译结果

**工作原理**：
- 快捷键触发后，应用会模拟 Ctrl+C 复制选中文本
- 自动读取剪贴板内容
- 调用翻译 API
- 在鼠标附近弹出悬浮窗

**故障排查**：
- 如果快捷键无效，检查是否与其他应用冲突
- 可在"设置"中修改快捷键（需要重启应用）

### 翻译历史

1. 切换到"翻译历史"标签页
2. 查看所有翻译记录（按时间倒序）
3. 功能：
   - **搜索**：输入关键词，支持原文和译文搜索
   - **分页**：默认每页 20 条，可翻页浏览
   - **导出 CSV**：导出为 Excel 可打开的 CSV 文件
   - **导出 TXT**：导出为纯文本格式
   - **删除选中**：勾选记录后删除
   - **清空历史**：删除所有记录（谨慎操作）

### 系统托盘

- 关闭主窗口后，应用会最小化到系统托盘
- **双击托盘图标**：显示/隐藏主窗口
- **右键托盘图标**：
  - 显示主窗口
  - 隐藏主窗口
  - 退出应用

## 高级设置

### 修改默认语言

在"设置 → 偏好设置"中可修改：

- **默认引擎**：百度翻译 / 有道翻译
- **默认源语言**：自动检测 / 指定语言
- **默认目标语言**：中文 / 英语 / 其他

### 修改全局快捷键

1. 打开"设置 → 偏好设置"
2. 修改"全局快捷键"字段
3. 格式：`<ctrl>+<alt>+<字母>`
4. 保存后**重启应用**生效

### 切换翻译引擎

两种方式：

1. **全局切换**：设置 → 偏好设置 → 默认引擎
2. **临时切换**：在主窗口选择不同引擎（未来版本）

## 常见问题

### 1. 翻译失败，提示"密钥未配置"

**解决**：在设置中填写正确的 API 密钥

### 2. 翻译失败，提示"API 错误 52001"

**可能原因**：
- 百度 APP ID 或密钥错误
- 网络连接问题
- API 配额用尽

**解决**：
- 检查密钥是否正确
- 访问百度翻译控制台查看配额

### 3. 框选翻译无反应

**排查步骤**：
1. 检查应用是否在运行
2. 尝试用鼠标重新选中文本
3. 确认快捷键无冲突
4. 查看是否有权限问题（部分应用可能阻止剪贴板访问）

### 4. PDF 文件翻译结果乱码

**原因**：PDF 格式复杂，可能包含图片或特殊编码

**建议**：
- 使用 Adobe Acrobat 将 PDF 转为纯文本后再翻译
- 或使用 OCR 工具提取文字

### 5. 应用启动慢

**可能原因**：
- 第一次启动需要初始化数据库
- 历史记录过多

**优化**：
- 定期清理历史记录
- 数据库文件位于 `~/.translation_tool/`

## 数据存储位置

- **配置文件**：`~/.translation_tool/settings.json`
- **数据库**：`~/.translation_tool/translation_history.db`

在 Windows 上，`~` 代表 `C:\Users\你的用户名\`

## 卸载

1. 关闭应用
2. 删除数据目录：`C:\Users\你的用户名\.translation_tool`
3. 删除项目文件夹
4. （可选）卸载 Python 依赖：`pip uninstall -r requirements.txt -y`

## 反馈与支持

如遇到问题或有建议，请：

1. 检查本文档的"常见问题"部分
2. 查看 `README.md` 了解更多技术细节
3. 提交 Issue（如果是开源项目）

## 更新日志

### v1.0 (2024-02-03)

初始版本，包含：
- 文本翻译
- 文件翻译（TXT/DOCX/PDF）
- 框选翻译（全局快捷键）
- 翻译历史管理
- 百度翻译和有道翻译支持
